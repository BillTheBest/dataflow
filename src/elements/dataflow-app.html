<!-- Custom elements -->
<link rel="import" href="dataflow-graph.html">

<polymer-element name="dataflow-app" attributes="graph src">
  <template>

    <style>
      * {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      dataflow-app {
        overflow: hidden;
      }
    </style>

    <dataflow-graph id="base" graph="{{graph}}" nodewidth="60" nodeheight="60" ></dataflow-graph>

  </template>
  <script>
    Polymer("dataflow-app", {
      created: function() {
      },
      graphChanged: function () {
        var parsedGraph = this.graph;
        if (typeof parsedGraph === "string") {
          parsedGraph = JSON.parse( this.graph );
        }
        this.$.base.graph = this.parsedGraph;
        console.log(this);
      },
      srcChanged: function () {
        // Load JSON via AJAX and load graph
      }
    });
  </script>
</polymer-element>
